*** Settings ***
Library    AppiumLibrary

*** Keywords ***
Open Financisto Application
    Open Application    http://localhost:4723/wd/hub    platformName=Android    platformVersion=5.1.1    deviceName=emulator-5554    appPackage=ru.orangesoftware.financisto    appActivity=.activity.MainActivity

Get Text After It Is Visible
    [Arguments]    ${locator}
    Wait Until Element Is Visible On Page    ${locator}
    ${textResult} =    Get Text    ${locator}
    [Return]    ${textResult}

Input Text After It Is Visible
    [Arguments]    ${locator}    ${text}
    Wait Until Element Is Visible On Page    ${locator}
    Input Text    ${locator}    ${text}

Wait Until Element Is Visible On Page
    [Arguments]    ${locator}
    Wait Until Page Contains Element    ${locator}    timeout=3s    error=Element should be visible.
    Wait Until Element Is Visible    ${locator}    timeout=3s    error=Element should be visible.

Click Element After It Is Visible
    [Arguments]    ${locator}
    Wait Until Element Is Visible On Page    ${locator}
    Click Element    ${locator}

Delete Account
    [Arguments]    ${accountName}
    Click Element After It Is Visible    //*[@resource-id="android:id/list"]//*[@text="${accountName}"]
    Click Element After It Is Visible    //*[@text="Delete account"]
    Click Element After It Is Visible    //*[@resource-id="android:id/button1"]
    Wait Until Page Does Not Contain Element    //*[@resource-id="android:id/list"]//*[@text="${accountName}"]

Clear Text After It Is Visible
    [Arguments]    ${locator}
    Wait Until Element Is Visible On Page    ${locator}
    Clear Text    ${locator}

Create A New Account
    [Arguments]    ${accountName}
    Click Element After It Is Visible    android:id/button1
    Click Element After It Is Visible   //*[@resource-id="ru.orangesoftware.financisto:id/bAdd"]
    Input Text After It Is Visible   //android.widget.ScrollView/android.widget.LinearLayout[1]/android.widget.LinearLayout[2]/android.widget.RelativeLayout[1]/android.widget.EditText[1]    ${accountName}
    Wait Until Element Is Visible On Page    //android.widget.ScrollView/android.widget.LinearLayout[1]/android.widget.LinearLayout[2]/android.widget.RelativeLayout[1]/android.widget.EditText[1]
    Click Element After It Is Visible    //*[@resource-id="ru.orangesoftware.financisto:id/currency_add"]
    Wait Until Element Is Visible On Page    //*[@resource-id="android:id/select_dialog_listview"]
    Click Element After It Is Visible    //*[@text="AED (United Arab Emirates dirham)"]
    Click Element After It Is Visible    //*[@resource-id="android:id/button1"]
    Input Text After It Is Visible    //*[@resource-id="ru.orangesoftware.financisto:id/primary"]    3000
    Input Text After It Is Visible    //android.widget.ScrollView/android.widget.LinearLayout[1]/android.widget.LinearLayout[5]/android.widget.RelativeLayout[1]/android.widget.EditText[1]    This is a test
    Input Text After It Is Visible    //android.widget.ScrollView/android.widget.LinearLayout[1]/android.widget.LinearLayout[6]/android.widget.RelativeLayout[1]/android.widget.EditText[1]    1
    Click Element After It Is Visible    //*[@resource-id="ru.orangesoftware.financisto:id/bOK"]